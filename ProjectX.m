clc;
clear all;
a=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30];
b=[22,23,24,26,28,30,32,34,36,38,40,42,44,46,48,50,52,54,60,68,66,62,61,60,65,78,98,76,54,32];
%plot(a,b,'r*:');
sum=[];

sum1=0;
sum2=0;
sum3=0;
sum4=0;
sum5=0;
sum6=0;
sum7=0;
sum8=0;
sum9=0;
sum10=0;
sum11=0;
sum12=0;
sum13=0;
sum14=0;
sum15=0;
sum16=0;
sum17=0;
sum18=0;
sum19=0;
sum20=0;
sum21=0;
sum22=0;
sum23=0;
sum24=0;
sum25=0;
sum26=0;
sum27=0;
sum28=0;
sum29=0;
n=length(a);
U=zeros(1,30);
for i=1:7:n-7
    
    sum1=sum1+a(i);
    sum2=sum2+a(i+1);
    sum3=sum3+a(i+2);
    sum4=sum4+a(i+3);
    sum5=sum5+a(i+4);
    sum6=sum6+a(i+5);
    sum7=sum7+a(i+6);
    sum8=sum8+sum1*b(i);
    sum9=sum9+sum2*b(i+1);
    sum10=sum10+sum3*b(i+2);
    sum11=sum11+sum4*b(i+3);
    sum12=sum12+sum4*b(i+4);
    sum13=sum13+sum4*b(i+5);
    sum14=sum14+sum4*b(i+6);
    sum15=sum15+a(i)^2;
    sum16=sum16+a(i+1)^2;
    sum17=sum17+a(i+2)^2;
    sum18=sum18+a(i+3)^2;
    sum19=sum19+a(i+4)^2;
    sum20=sum20+a(i+5)^2;
    sum21=sum21+a(i+6)^2;
    sum22=sum22+b(i);
    sum23=sum23+b(i+1);
    sum24=sum24+b(i+2);
    sum25=sum25+b(i+3);
    sum26=sum26+b(i+4);
    sum27=sum27+b(i+5);
    sum28=sum28+b(i+6);
end
A=[n sum1;sum1 sum15];
B=[n sum2;sum2 sum16];
C=[n sum3;sum3 sum17];
D=[n sum4;sum4 sum18];
E=[n sum5;sum5 sum19];
F=[n sum6;sum6 sum20];
G=[n sum7;sum7 sum21];
A1=inv(A);
B1=inv(B);
C1=inv(C);
D1=inv(D);
E1=inv(E);
F1=inv(F);
G1=inv(G);
A2=[sum22;sum8];
B2=[sum23;sum9];
C2=[sum24;sum10];
D2=[sum25;sum11];
E2=[sum26;sum12];
F2=[sum27;sum13];
G2=[sum28;sum14];
A3=A1*A2;
B3=B1*B2;
C3=C1*C2;
D3=D1*D2;
E3=E1*E2;
F3=F1*F2;
G3=G1*G2;
H=[1,8,15,22,29];
H2=[22 44 66 88 32];
I=[2,9,16,23,30];
J=[3,10,17,24];
K=[4,11,18,25];
L=[5,12,19,26];
M=[6,13,20,27];
N=[7,14,21,28];
H1=A3(1,1)+A3(2,1)*H;
I1=B3(1,1)+B3(2,1)*I;
J1=C3(1,1)+C3(2,1)*J;
K1=D3(1,1)+D3(2,1)*K;
L1=E3(1,1)+E3(2,1)*L;
M1=F3(1,1)+F3(2,1)*M;
N1=G3(1,1)+G3(2,1)*N;
plot(H,H1,'b*:');
hold
plot(H,H2,'r*:');